# Template f√ºr Home Assistant LVGL Button Widget
# Variablen: num, col, row, default_icon (optional, MDI-Format z.B. "mdi:lightbulb")
# Die Entity-ID wird dynamisch aus dem Text-Sensor ha_entity_${num}_id gelesen

defaults:
  num: "1"
  col: "0"
  row: "0"
  default_icon: "mdi:lightbulb"

button:
  id: homeassistant_btn_${num}
  checkable: true
  grid_cell_column_pos: ${col}
  grid_cell_row_pos: ${row}
  grid_cell_x_align: STRETCH
  grid_cell_y_align: STRETCH
  widgets:
    - label:
        id: homeassistant_btn_${num}_icon
        text_font: btn_icons_font
        text: !lambda |-
          static MdiIconHelper helper;
          return helper.convert_mdi_icon("${default_icon}");
        align: CENTER
        y: -20
    - label:
        id: homeassistant_btn_${num}_label
        text: "${num}"
        long_mode: dot
        align: CENTER
        y: 30
  on_click:
    - homeassistant.service:
        service: switch.toggle
        data:
          entity_id: !lambda return id(ha_entity_${num}_id).state.c_str();
